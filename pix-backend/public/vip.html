<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L√°bia Extrema ‚Ä¢ Bot</title>

<style>
*{box-sizing:border-box;font-family:system-ui,Arial}
html, body{
  margin:0;
  padding:0;
  height:100%;
  background:#000;
}

/* MOBILE: ocupa a tela toda */
body{
  display:block;
}

.phone{
  position:relative;
  width:100%;
  max-width:390px;
  height:100svh; /* üî• remove o v√£o no celular */
  background:#f2f2f2;
  border-radius:16px;
  box-shadow:0 20px 45px rgba(0,0,0,.35);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.header{
  background:#b30000;
  color:#fff;
  padding:12px;
}

.title{
  display:flex;
  align-items:center;
  gap:6px;
  font-weight:800;
  font-size:18px;
}

.logo{
  width:28px;
  height:28px;
  border-radius:50%;
  border:2px solid #fff;
}

.sub{
  font-size:12px;
  margin-top:4px;
  opacity:.9;
}

.messages{
  flex:1;
  padding:12px;
  overflow-y:auto;
}

.msg{
  max-width:78%;
  margin-bottom:10px;
  padding:10px 12px;
  border-radius:12px;
  font-size:14px;
  line-height:1.4;
  animation:fade .3s ease;
}

.bot{
  background:#fff;
  border-top-left-radius:0;
}

.user{
  background:#ffd6d6;
  margin-left:auto;
  border-top-right-radius:0;
}

.buttons{
  padding:10px;
  background:#f7f7f7;
  border-top:1px solid rgba(0,0,0,.1);
  display:flex;
}

.buttons button{
  flex:1;
  padding:10px;
  border-radius:20px;
  border:none;
  background:#b30000;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}

@keyframes fade{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1}
}

.pix-box{
  margin-top:10px;
  background:#f5f5f5;
  border:1px solid #ccc;
  border-radius:8px;
  padding:8px;
}

.pix-box input{
  width:100%;
  border:none;
  background:transparent;
  font-size:12px;
  outline:none;
  color:#333;
}

.pix-box button{
  margin-top:6px;
  width:100%;
  padding:6px;
  border:none;
  border-radius:6px;
  background:#b30000;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}

.online-status {
  color: #1aff6c; /* verde neon bonito */
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
}

.dot {
  width: 9px;
  height: 9px;
  background: radial-gradient(circle, #7cffb2 0%, #1aff6c 60%, #00c853 100%);
  border-radius: 50%;
  animation: pulseGlow 1.1s infinite;
  box-shadow: 0 0 6px rgba(26, 255, 108, 0.9);
}

@keyframes pulseGlow {
  0% {
    transform: scale(1);
    opacity: 1;
    box-shadow: 0 0 6px rgba(26, 255, 108, 0.9);
  }
  50% {
    transform: scale(1.35);
    opacity: 0.6;
    box-shadow: 0 0 14px rgba(26, 255, 108, 1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
    box-shadow: 0 0 6px rgba(26, 255, 108, 0.9);
  }
}

/* ===== MODAL 1 CLIQUE ===== */
.bank-modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9988;
}

.bank-modal.hidden{display:none}

.bank-box{
  background:#111;
  color:#fff;
  padding:20px;
  border-radius:14px;
  width:90%;
  max-width:320px;
  text-align:center;
}

.bank-box h3{margin-bottom:12px}

.bank-box button{
  width:100%;
  margin:6px 0;
  padding:10px;
  border-radius:8px;
  border:none;
  font-weight:700;
  cursor:pointer;
  background:#b30000;
  color:#fff;
}

.bank-box .hint{
  font-size:12px;
  opacity:.75;
  margin-top:10px;
}

.bank-box .close{
  background:#333;
  margin-top:12px;
}

@media (min-width: 768px){
  body{
    display:flex;
    justify-content:center;
    align-items:center;
  }

  .phone{
    height:640px;
  }
}
</style>
</head>

<body>

<div class="phone">
  <div class="header">
    <div class="title">
      <img src="https://files.catbox.moe/3jvcid.jpg" class="logo">
      <span>L√°bia Extrema</span>
    </div>
    <div class="sub online-status">
    <span class="dot"></span>
     bot ‚Ä¢ online agora
   </div>
  </div>

<div class="messages" id="chat"></div>

<!-- ‚úÖ BOT√ÉO J√Å PAGUEI (NOVO) -->
<div id="jaPagueiContainer"
     style="display:none; text-align:center; padding:10px; background:#f7f7f7;">
  <button
    onclick="checarPagamento()"
    style="
      background:#0a8f3c;
      color:#fff;
      padding:12px 28px;
      border:none;
      border-radius:22px;
      font-size:16px;
      font-weight:800;
      cursor:pointer;
      width:100%;
      max-width:320px;
    ">
    ‚úÖ J√° paguei
  </button>
</div>

<!-- üîî BOX DE MENSAGENS DO SISTEMA -->
<div id="infoBox"
     style="
       display:none;
       position:absolute;
       bottom:90px;
       left:50%;
       transform:translateX(-50%);
       width:85%;
       max-width:300px;
       padding:10px;
       background:#fff3cd;
       color:#333;
       border-radius:12px;
       font-size:13px;
       text-align:center;
       border:1px solid #ffeeba;
       box-shadow:0 8px 20px rgba(0,0,0,.25);
       z-index:9999;
     ">
</div>

<div class="buttons" id="buttons"></div>
</div>

<script>
let paymentId = null;

const chat = document.getElementById("chat");
const buttons = document.getElementById("buttons");

function botMsg(text, delay){
  setTimeout(()=>{
    const div = document.createElement("div");
    div.className = "msg bot";
    div.innerHTML = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }, delay);
}

function setButtons(list){
  buttons.innerHTML = "";
  list.forEach(b=>{
    const btn = document.createElement("button");
    btn.innerText = b.text;
    btn.onclick = b.action;
    buttons.appendChild(btn);
  });
}

function showInfoBox(html) {
  const box = document.getElementById("infoBox");
  if (!box) return;

  box.innerHTML = "<p>" + html + "</p>";
  box.style.display = "block";

  // ‚è±Ô∏è esconde ap√≥s 6 segundos
  setTimeout(() => {
    box.style.display = "none";
  }, 15000);
}

/* ===== MENSAGENS DIVIDIDAS ===== */
botMsg("üúÇ ‚öõ Bem-vindo √† irmandade mais foda do Brasil.", 500);
botMsg("Aqui n√£o existe gados ‚Äî s√≥ homens que pegam mulheres f√°cil. üí™", 1000);

botMsg("üî± Aqui eu te ensino:", 2000);
botMsg("üîû Como se comportar.\nüîû Como falar perto dela.\nüòà O que falar pra ela.", 3000);

botMsg("‚ù§Ô∏è‚Äçüî• A psicologia por tr√°s dos perfumes que acendem desejos nas mentes femininas.\nüòà E muito mais‚Ä¶", 5200);

botMsg("‚ö†Ô∏è Usando:\n‚öú Psicologia Obscura\nüåÄ Manipula√ß√£o Emocional\nüß† Neurolingu√≠stica\nüìò Princ√≠pios de Persuas√£o\nüèπ Elabora√ß√£o de Elogios Subjetivos", 6800);

botMsg("üì≤ 2 mil mensagens prontas baseadas em psicologia e manipula√ß√£o.\nFaz ela responder na mesma hora. üîû", 8800);

botMsg("üî• Fa√ßa qualquer pessoa comer na sua m√£o e ficar louca pra te dar. üòàüîû", 9000);

botMsg("Para manter tudo funcionando e ajudar nas manuten√ß√µes,\ncobramos apenas um valor simb√≥lico de R$10.\n\nQuem entra aqui n√£o paga‚Ä¶ investe em si mesmo üîû", 9500);

/* ===== BOT√ÉO √öNICO ===== */
setTimeout(()=>{
  setButtons([
    { text: "üí≥ Gerar PIX R$10", action: gerarPix },
    { text:"‚ö° Pague com 1 clique", action: pagar1Clique }
  ]);
}, 10000);

/* üëá FICA AQUI */
function copiarPix(){
  const input = document.getElementById("pixCode");
  if (!input) return;

  input.select();
  input.setSelectionRange(0, 99999);
  navigator.clipboard.writeText(input.value);

  alert("‚úÖ C√≥digo PIX copiado!");
}

async function checarPagamento() {
  if (!paymentId) return;

  botMsg("‚è≥ Verificando pagamento...", 300);

  try {
    const res = await fetch(
    `/status/${paymentId}`
     );


    const data = await res.json();

    if (data.status === "approved") {
      localStorage.setItem("isVIP", "true");

      botMsg("üéâ Pagamento confirmado! Acesso VIP liberado.", 800);

      setTimeout(() => {
        window.location.href = "index.html";
      }, 2000);
    } else {
      botMsg("‚è≥ Pagamento ainda n√£o confirmado.", 800);
    }
  } catch (e) {
    botMsg("‚ùå Erro ao verificar pagamento.", 800);
  }
}

async function gerarPix(){
  chat.innerHTML += `<div class="msg user">Gerar PIX</div>`;
  botMsg("Gerando pagamento via PIX‚Ä¶ ‚è≥", 500);

  try {
    const res = await fetch("/gerar-pix", {
     method: "POST",
     headers: { "Content-Type": "application/json" }
    });


    if (!res.ok) throw new Error("Erro no servidor");

    const data = await res.json();
    paymentId = data.paymentId; // üëà salva o ID

    botMsg(`
      ‚úÖ PIX GERADO R$10<br><br>

      <img src="data:image/png;base64,${data.qrBase64}" width="180"><br>

      <div class="pix-box">
        <input id="pixCode" value="${data.qr}" readonly>

        <button onclick="copiarPix()">üìã Copiar c√≥digo PIX</button>

      </div>
    `, 1200);
     
      // ‚è≥ Mensagem autom√°tica ap√≥s 15 segundos
        setTimeout(() => {
        botMsg(`
        ‚ú®  Seu Acesso VIP aparece sozinho ap√≥s o pagamento.<br>
        Se houver atraso, clique em <b>J√° paguei</b> e o sistema libera seu acesso instantaneamente.
        `, 0);
     }, 30000);

  } catch (e) {
    botMsg("‚ùå N√£o foi poss√≠vel gerar o PIX. Tente novamente.", 1200);
  }
}

// ===== 1 CLIQUE =====
function abrirBancos(){
  document.getElementById("bankModal").classList.remove("hidden");
}

function fecharBancos(){
  document.getElementById("bankModal").classList.add("hidden");
}

function abrirBanco(banco) {
  fecharBancos();

  // 1Ô∏è‚É£ mostra mensagem de seguran√ßa
  botMsg(`
  üîí <b>Ambiente 100% seguro</b><br><br>
  Voc√™ ser√° direcionado ao <b>app oficial do seu banco</b>.<br><br>
  Cole o PIX e confirme o pagamento.<br>
  ‚ú® Assim que for aprovado, seu <b>Acesso VIP aparece automaticamente</b>.
  `, 0);

  // 2Ô∏è‚É£ detecta sistema
  const ua = navigator.userAgent || navigator.vendor || window.opera;
  const isAndroid = /android/i.test(ua);
  const isIOS = /iPad|iPhone|iPod/.test(ua);

  const links = {
    nubank: {
      android: "https://play.google.com/store/apps/details?id=com.nu.production",
      ios: "https://apps.apple.com/br/app/nubank/id814456780",
      web: "https://nubank.com.br"
    },
    itau: {
      android: "https://play.google.com/store/apps/details?id=com.itau",
      ios: "https://apps.apple.com/br/app/itau/id474505665",
      web: "https://www.itau.com.br"
    },
    inter: {
      android: "https://play.google.com/store/apps/details?id=br.com.intermedium",
      ios: "https://apps.apple.com/br/app/banco-inter/id951812587",
      web: "https://www.bancointer.com.br"
    },
    c6: {
      android: "https://play.google.com/store/apps/details?id=com.c6bank.app",
      ios: "https://apps.apple.com/br/app/c6-bank/id1460460334",
      web: "https://www.c6bank.com.br"
    },
    neon: {
      android: "https://play.google.com/store/apps/details?id=br.com.neon",
      ios: "https://apps.apple.com/br/app/neon/id1111816971",
      web: "https://www.neon.com.br"
    }
  };

  const bancoLinks = links[banco];
  if (!bancoLinks) return;

  // 3Ô∏è‚É£ espera a mensagem renderizar (ESSENCIAL)
  setTimeout(() => {
    if (isAndroid) {
      window.location.href = bancoLinks.android;
    } else if (isIOS) {
      window.location.href = bancoLinks.ios;
    } else {
      window.location.href = bancoLinks.web;
    }
  }, 1200); // üëà tempo perfeito (l√™ + confia)
}

function pagar1Clique() {
  const pixInput = document.getElementById("pixCode");
  if (!pixInput || !paymentId) {
    alert("Gere o PIX primeiro.");
    return;
  }

  // 1Ô∏è‚É£ copia o PIX imediatamente
    navigator.clipboard.writeText(pixInput.value);

      showInfoBox(
      "‚úÖ <b>PIX copiado automaticamente!</b><br>" +
      "Agora abra seu banco, cole o c√≥digo copiado e confirme o pagamento.<br>" +
      "‚è±Ô∏è Leva menos de 10 segundos."
     );



  // 2Ô∏è‚É£ abre sele√ß√£o de banco (como j√° acontece hoje)
  abrirBancos();

// 3Ô∏è‚É£ ap√≥s 5s, MOSTRA o bot√£o "J√° paguei" (sem mexer nos outros)
  setTimeout(() => {
  const jaPaguei = document.getElementById("jaPagueiContainer");
  if (jaPaguei) jaPaguei.style.display = "block";
}, 5000);

}

</script>

<div id="bankModal" class="bank-modal hidden">
  <div class="bank-box">
    <h3>Escolha seu banco</h3>

    <button onclick="abrirBanco('nubank')">Nubank</button>
    <button onclick="abrirBanco('itau')">Ita√∫</button>
    <button onclick="abrirBanco('inter')">Banco Inter</button>
    <button onclick="abrirBanco('c6')">C6 Bank</button>
    <button onclick="abrirBanco('neon')">Neon</button>


    <p class="hint">
      O pagamento ser√° aberto no app do banco, se dispon√≠vel no seu celular.
    </p>

    <button class="close" onclick="fecharBancos()">Cancelar</button>
  </div>
</div>

</body>
</html>
